<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>桃園市行政區3級Jenks分級分析儀表板</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <div class="container">
        <!-- 標題區域 -->
        <header class="header">
            <h1>🏙️ 桃園市行政區發展潛力分析</h1>
            <p class="subtitle">基於3級Jenks自然斷點的13個行政區發展潛力評估 (0-10分制)</p>
        </header>

        <!-- 主要指標卡片 -->
        <section class="metrics-cards">
            <div class="card high-potential">
                <h3>高潛力</h3>
                <div class="metric-value" id="highCount"> 加載中... </div>
                <div class="metric-label">個行政區</div>
                <div class="districts-list" id="highDistricts"> 加載中... </div>
            </div>
            <div class="card medium-potential">
                <h3>中潛力</h3>
                <div class="metric-value" id="mediumCount"> 加載中... </div>
                <div class="metric-label">個行政區</div>
                <div class="districts-list" id="mediumDistricts"> 加載中... </div>
            </div>
            <div class="card low-potential">
                <h3>低潛力</h3>
                <div class="metric-value" id="lowCount"> 加載中... </div>
                <div class="metric-label">個行政區</div>
                <div class="districts-list" id="lowDistricts"> 加載中... </div>
            </div>
        </section>

        <!-- 主要內容區域 -->
        <main class="main-content">
            <!-- 左側：分級散點圖 -->
            <section class="chart-section">
                <h2>📊 3級Jenks分級結果</h2>
                <div class="chart-container">
                    <canvas id="jenksChart"></canvas>
                </div>
                <div class="chart-info">
                    <p><strong>F統計量:</strong> <span id="fStatistic">加載中...</span></p>
                    <p><strong>效應大小:</strong> <span id="effectSize">加載中...</span></p>
                    <p><strong>分級方法:</strong> Jenks自然斷點 (3級)</p>
                    <p><strong>分數範圍:</strong> 0-10分制</p> 
                </div>
            </section>

            <!-- 右側：特徵雷達圖 -->
            <section class="chart-section">
                <h2>🎯 特徵分析雷達圖</h2>
                <div class="radar-controls">
                    <select id="districtSelect">
                        <option value="">選擇行政區</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </section>
        </main>

        <!-- 詳細數據表格 -->
        <section class="data-table-section">
            <h2>📋 詳細分級結果</h2>
            <div class="table-container">
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th>排名</th>
                            <th>行政區</th>
                            <th>潛力等級</th>
                            <th>綜合分數 (0-10)</th>
                            <th>工作年齡比例</th>
                            <th>家戶中位數所得</th>
                            <th>第三產業比例</th>
                            <th>醫療指數</th>
                            <th>商業集中度</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- 動態生成 -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Interactive Map Section -->
        <section class="map-section content-section">
            <h2>🗺️ 互動式發展潛力地圖</h2>
            <div class="map-container-iframe">
                <iframe src="map_interactive.html" width="100%" height="600px" style="border:1px solid #ddd; border-radius: 8px;" title="桃園市互動式發展潛力地圖"></iframe>
            </div>
            <p style="text-align:center; font-size:14px; margin-top:10px; color: #555;">
                <em>在地圖上探索各行政區的詳細評估結果。可拖曳、縮放，並點擊區域查看更多資訊。<br>
                <a href="map_interactive.html" target="_blank" style="color: #007bff; text-decoration: none;">點此在新分頁中開啟全螢幕互動式地圖</a>
                或查看 <a href="map.html" target="_blank" style="color: #007bff; text-decoration: none;">靜態地圖與詳細統計頁面</a>。
                </em>
            </p>
        </section>

        <!-- 關鍵洞察 -->
        <section class="insights-section">
            <h2>💡 關鍵洞察與政策建議</h2>
            <div class="insights-grid">
                <div class="insight-card">
                    <h3>🏢 高潛力區域</h3>
                    <ul>
                        <li>桃園核心都會區重點區域</li>
                        <li>平均綜合分數 <span id="highAvgScore">加載中...</span> 分 (0-10制)</li>
                        <li>醫療資源充足，產業發達，所得水平高</li>
                        <li><strong>建議:</strong> 持續強化核心競爭力與創新產業發展</li>
                    </ul>
                </div>
                <div class="insight-card">
                    <h3>🌱 中潛力區域</h3>
                    <ul>
                        <li>發展中區域群組</li>
                        <li>平均綜合分數 <span id="mediumAvgScore">加載中...</span> 分 (0-10制)</li>
                        <li>發展程度適中，具有成長潛力</li>
                        <li><strong>建議:</strong> 因地制宜發展特色產業，加強基礎建設</li>
                    </ul>
                </div>
                <div class="insight-card">
                    <h3>🌾 低潛力區域</h3>
                    <ul>
                        <li>需關注區域，可能需要政策扶持</li>
                        <li>平均綜合分數 <span id="lowAvgScore">加載中...</span> 分 (0-10制)</li>
                        <li>發展條件相對較弱，但有特色資源</li>
                        <li><strong>建議:</strong> 重點投入基礎建設，發展觀光與特色農業</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 方法說明 -->
        <section class="methodology-section">
            <h2>🔬 Jenks自然斷點分級方法</h2>
            <div class="method-steps">
                <div class="step">
                    <h4>STEP 1: 數據準備</h4>
                    <p>整合人口、商業、所得、產業、醫療等5個關鍵指標</p>
                </div>
                <div class="step">
                    <h4>STEP 2: 特徵標準化</h4>
                    <p>使用Z-score標準化處理所有特徵</p>
                </div>
                <div class="step">
                    <h4>STEP 3: 權重計算</h4>
                    <p>依據選定方案設定各指標權重</p>
                </div>
                <div class="step">
                    <h4>STEP 4: Jenks分級</h4>
                    <p>使用自然斷點方法找到最優分割點，最大化組間差異、最小化組內差異</p>
                </div>
                <div class="step">
                    <h4>STEP 5: 驗證分析</h4>
                    <p>通過F統計量、效應大小等指標驗證分級質量</p>
                </div>
            </div>
        </section>

        <!-- 頁腳 -->
        <footer class="footer">
            <p>&copy; 2024 桃園市行政區發展潛力分析 - 3級Jenks分級 | 
               <a href="https://github.com/mentaikoisgood/Taoyuan-District-Income-Analysis" target="_blank">
                   GitHub Repository
               </a>
            </p>
        </footer>
    </div>

    <script src="js/jenks_data.js"></script>
    <script src="js/jenks_dashboard.js"></script>
</body>
</html>