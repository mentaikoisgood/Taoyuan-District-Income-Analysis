// 桃園市行政區特徵數據
const districtData = {
    "中壢區": {
        "潛力等級": "高潛力",
        "集群編號": 0,
        "家庭收入中位數": 504000,
        "勞動年齡比例": 72.21,
        "商業集中度": 7.79,
        "第三產業比例": 88.19,
        "醫療指數": 0.212,
        "分群機率": 0.665,
        "tsne_x": -61.56,
        "tsne_y": -120.77
    },
    "八德區": {
        "潛力等級": "中潛力",
        "集群編號": 2,
        "家庭收入中位數": 449000,
        "勞動年齡比例": 72.60,
        "商業集中度": 7.91,
        "第三產業比例": 79.60,
        "醫療指數": 0.095,
        "分群機率": 0.432,
        "tsne_x": -4.01,
        "tsne_y": 40.55
    },
    "大園區": {
        "潛力等級": "中潛力",
        "集群編號": 2,
        "家庭收入中位數": 447000,
        "勞動年齡比例": 73.06,
        "商業集中度": 7.85,
        "第三產業比例": 82.23,
        "醫療指數": 0.108,
        "分群機率": 0.533,
        "tsne_x": 93.36,
        "tsne_y": 41.19
    },
    "大溪區": {
        "潛力等級": "低潛力",
        "集群編號": 1,
        "家庭收入中位數": 424000,
        "勞動年齡比例": 71.97,
        "商業集中度": 7.97,
        "第三產業比例": 78.04,
        "醫療指數": 0.023,
        "分群機率": 0.577,
        "tsne_x": -18.51,
        "tsne_y": 100.57
    },
    "平鎮區": {
        "潛力等級": "中潛力",
        "集群編號": 2,
        "家庭收入中位數": 468000,
        "勞動年齡比例": 72.58,
        "商業集中度": 7.93,
        "第三產業比例": 81.83,
        "醫療指數": 0.146,
        "分群機率": 0.513,
        "tsne_x": 8.00,
        "tsne_y": -8.58
    },
    "復興區": {
        "潛力等級": "低潛力",
        "集群編號": 1,
        "家庭收入中位數": 398000,
        "勞動年齡比例": 71.18,
        "商業集中度": 7.77,
        "第三產業比例": 90.30,
        "醫療指數": 0.009,
        "分群機率": 0.476,
        "tsne_x": -66.60,
        "tsne_y": 119.84
    },
    "桃園區": {
        "潛力等級": "高潛力",
        "集群編號": 0,
        "家庭收入中位數": 521000,
        "勞動年齡比例": 72.19,
        "商業集中度": 7.79,
        "第三產業比例": 87.13,
        "醫療指數": 0.552,
        "分群機率": 0.681,
        "tsne_x": -105.53,
        "tsne_y": -206.82
    },
    "新屋區": {
        "潛力等級": "低潛力",
        "集群編號": 1,
        "家庭收入中位數": 404000,
        "勞動年齡比例": 70.94,
        "商業集中度": 7.99,
        "第三產業比例": 78.80,
        "醫療指數": 0.111,
        "分群機率": 0.646,
        "tsne_x": 42.12,
        "tsne_y": 160.80
    },
    "楊梅區": {
        "潛力等級": "中潛力",
        "集群編號": 2,
        "家庭收入中位數": 460000,
        "勞動年齡比例": 72.78,
        "商業集中度": 7.81,
        "第三產業比例": 81.15,
        "醫療指數": 0.099,
        "分群機率": 0.573,
        "tsne_x": 99.20,
        "tsne_y": -2.00
    },
    "龍潭區": {
        "潛力等級": "中潛力",
        "集群編號": 2,
        "家庭收入中位數": 465000,
        "勞動年齡比例": 72.38,
        "商業集中度": 7.94,
        "第三產業比例": 82.83,
        "醫療指數": 0.185,
        "分群機率": 0.710,
        "tsne_x": 63.86,
        "tsne_y": -17.57
    },
    "龜山區": {
        "潛力等級": "高潛力",
        "集群編號": 0,
        "家庭收入中位數": 488000,
        "勞動年齡比例": 73.48,
        "商業集中度": 8.00,
        "第三產業比例": 84.56,
        "醫療指數": 0.702,
        "分群機率": 0.435,
        "tsne_x": -41.11,
        "tsne_y": -89.20
    },
    "蘆竹區": {
        "潛力等級": "高潛力",
        "集群編號": 0,
        "家庭收入中位數": 530000,
        "勞動年齡比例": 72.48,
        "商業集中度": 7.85,
        "第三產業比例": 83.45,
        "醫療指數": 0.060,
        "分群機率": 0.639,
        "tsne_x": -76.84,
        "tsne_y": -225.69
    },
    "觀音區": {
        "潛力等級": "低潛力",
        "集群編號": 1,
        "家庭收入中位數": 421000,
        "勞動年齡比例": 73.51,
        "商業集中度": 7.97,
        "第三產業比例": 77.61,
        "醫療指數": 0.003,
        "分群機率": 0.502,
        "tsne_x": 77.22,
        "tsne_y": 149.57
    }
};

// 聚類統計
const clusterStats = {
    "高潛力": {
        "districts": ["中壢區", "桃園區", "龜山區", "蘆竹區"],
        "avgIncome": 510750,
        "color": "#e74c3c"
    },
    "中潛力": {
        "districts": ["八德區", "大園區", "平鎮區", "楊梅區", "龍潭區"],
        "avgIncome": 457800,
        "color": "#f39c12"
    },
    "低潛力": {
        "districts": ["大溪區", "復興區", "新屋區", "觀音區"],
        "avgIncome": 411750,
        "color": "#3498db"
    }
};

// 特徵標籤
const featureLabels = {
    "勞動年齡比例": "勞動年齡比例 (%)",
    "商業集中度": "商業集中度指數",
    "家庭收入中位數": "家庭收入中位數 (元)",
    "第三產業比例": "第三產業比例 (%)",
    "醫療指數": "醫療服務指數"
};

// 獲取所有行政區數據的函數
function getAllDistricts() {
    return Object.keys(districtData);
}

// 根據行政區名稱獲取數據
function getDistrictData(districtName) {
    return districtData[districtName];
}

// 獲取聚類統計數據
function getClusterStats() {
    return clusterStats;
}

// 獲取特徵範圍（用於標準化）
function getFeatureRanges() {
    const ranges = {};
    const features = ["勞動年齡比例", "商業集中度", "家庭收入中位數", "第三產業比例", "醫療指數"];
    
    features.forEach(feature => {
        const values = Object.values(districtData).map(d => d[feature]);
        ranges[feature] = {
            min: Math.min(...values),
            max: Math.max(...values)
        };
    });
    
    return ranges;
}

// 標準化特徵值（0-1範圍）
function normalizeFeature(value, feature) {
    const ranges = getFeatureRanges();
    const range = ranges[feature];
    return (value - range.min) / (range.max - range.min);
} 