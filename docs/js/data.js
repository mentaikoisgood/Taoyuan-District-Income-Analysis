// 桃園市行政區特徵數據 (基於Ward聚類 + Cluster平均分數分類)
const districtData = {
    "中壢區": {
        "潛力等級": "高潛力",
        "集群編號": 2,
        "家庭收入中位數": 504000,
        "勞動年齡比例": 72.21,
        "商業集中度": 7.79,
        "第三產業比例": 88.19,
        "醫療指數": 0.212,
        "綜合分數": 0.628,
        "分群機率": 0.405,
        "tsne_x": 101.09,
        "tsne_y": -33.52
    },
    "八德區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 449000,
        "勞動年齡比例": 72.60,
        "商業集中度": 7.91,
        "第三產業比例": 79.60,
        "醫療指數": 0.095,
        "綜合分數": 0.327,
        "分群機率": 0.774,
        "tsne_x": 2.54,
        "tsne_y": 59.26
    },
    "大園區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 447000,
        "勞動年齡比例": 73.06,
        "商業集中度": 7.85,
        "第三產業比例": 82.23,
        "醫療指數": 0.108,
        "綜合分數": 0.393,
        "分群機率": 0.510,
        "tsne_x": 50.29,
        "tsne_y": 46.65
    },
    "大溪區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 424000,
        "勞動年齡比例": 71.97,
        "商業集中度": 7.97,
        "第三產業比例": 78.04,
        "醫療指數": 0.023,
        "綜合分數": 0.187,
        "分群機率": 0.486,
        "tsne_x": -29.31,
        "tsne_y": 73.28
    },
    "平鎮區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 468000,
        "勞動年齡比例": 72.58,
        "商業集中度": 7.93,
        "第三產業比例": 81.83,
        "醫療指數": 0.146,
        "綜合分數": 0.441,
        "分群機率": 0.647,
        "tsne_x": 3.22,
        "tsne_y": 35.65
    },
    "復興區": {
        "潛力等級": "低潛力",
        "集群編號": 1,
        "家庭收入中位數": 398000,
        "勞動年齡比例": 71.18,
        "商業集中度": 7.77,
        "第三產業比例": 90.30,
        "醫療指數": 0.009,
        "綜合分數": 0.266,
        "分群機率": 1.000,
        "tsne_x": 89.30,
        "tsne_y": -59.30
    },
    "桃園區": {
        "潛力等級": "高潛力",
        "集群編號": 2,
        "家庭收入中位數": 521000,
        "勞動年齡比例": 72.19,
        "商業集中度": 7.79,
        "第三產業比例": 87.13,
        "醫療指數": 0.552,
        "綜合分數": 0.748,
        "分群機率": 0.521,
        "tsne_x": 118.47,
        "tsne_y": -22.16
    },
    "新屋區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 404000,
        "勞動年齡比例": 70.94,
        "商業集中度": 7.99,
        "第三產業比例": 78.80,
        "醫療指數": 0.111,
        "綜合分數": 0.117,
        "分群機率": 0.405,
        "tsne_x": -51.86,
        "tsne_y": 80.30
    },
    "楊梅區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 460000,
        "勞動年齡比例": 72.78,
        "商業集中度": 7.81,
        "第三產業比例": 81.15,
        "醫療指數": 0.099,
        "綜合分數": 0.378,
        "分群機率": 0.476,
        "tsne_x": 63.47,
        "tsne_y": 31.64
    },
    "龍潭區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 465000,
        "勞動年齡比例": 72.38,
        "商業集中度": 7.94,
        "第三產業比例": 82.83,
        "醫療指數": 0.185,
        "綜合分數": 0.453,
        "分群機率": 0.561,
        "tsne_x": 8.13,
        "tsne_y": 16.11
    },
    "龜山區": {
        "潛力等級": "高潛力",
        "集群編號": 2,
        "家庭收入中位數": 488000,
        "勞動年齡比例": 73.48,
        "商業集中度": 8.00,
        "第三產業比例": 84.56,
        "醫療指數": 0.702,
        "綜合分數": 0.774,
        "分群機率": 0.418,
        "tsne_x": -16.35,
        "tsne_y": -4.64
    },
    "蘆竹區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 530000,
        "勞動年齡比例": 72.48,
        "商業集中度": 7.85,
        "第三產業比例": 83.45,
        "醫療指數": 0.060,
        "綜合分數": 0.588,
        "分群機率": 0.390,
        "tsne_x": 79.06,
        "tsne_y": 5.12
    },
    "觀音區": {
        "潛力等級": "中潛力",
        "集群編號": 0,
        "家庭收入中位數": 421000,
        "勞動年齡比例": 73.51,
        "商業集中度": 7.97,
        "第三產業比例": 77.61,
        "醫療指數": 0.003,
        "綜合分數": 0.254,
        "分群機率": 0.468,
        "tsne_x": 19.21,
        "tsne_y": 86.65
    }
};

// 聚類統計 (基於Ward聚類 + Cluster平均分數分類)
const clusterStats = {
    "高潛力": {
        "districts": ["中壢區", "桃園區", "龜山區"],
        "avgScore": 0.717,
        "color": "#e74c3c",
        "cluster_id": 2
    },
    "中潛力": {
        "districts": ["八德區", "大園區", "大溪區", "平鎮區", "新屋區", "楊梅區", "龍潭區", "蘆竹區", "觀音區"],
        "avgScore": 0.349,
        "color": "#f39c12",
        "cluster_id": 0
    },
    "低潛力": {
        "districts": ["復興區"],
        "avgScore": 0.266,
        "color": "#3498db",
        "cluster_id": 1
    }
};

// 特徵標籤
const featureLabels = {
    "勞動年齡比例": "勞動年齡比例 (%)",
    "商業集中度": "商業集中度指數",
    "家庭收入中位數": "家庭收入中位數 (元)",
    "第三產業比例": "第三產業比例 (%)",
    "醫療指數": "醫療服務指數"
};

// Ward聚類 + Cluster平均分數分類信息
const clusteringInfo = {
    "method": "Ward聚類 + Cluster平均分數分類",
    "silhouette_score": 0.304,
    "cluster_assignment": {
        "cluster_2": {
            "level": "高潛力",
            "avg_score": 0.717,
            "districts_count": 3
        },
        "cluster_0": {
            "level": "中潛力", 
            "avg_score": 0.349,
            "districts_count": 9
        },
        "cluster_1": {
            "level": "低潛力",
            "avg_score": 0.266,
            "districts_count": 1
        }
    },
    "features": {
        "所得_median_household_income": 0.35,
        "tertiary_industry_ratio": 0.25,
        "medical_index": 0.20,
        "人口_working_age_ratio": 0.15,
        "商業_hhi_index": 0.05
    }
};

// 獲取所有行政區數據的函數
function getAllDistricts() {
    return Object.keys(districtData);
}

// 根據行政區名稱獲取數據
function getDistrictData(districtName) {
    return districtData[districtName];
}

// 獲取聚類統計數據
function getClusterStats() {
    return clusterStats;
}

// 獲取聚類分析信息
function getClusteringInfo() {
    return clusteringInfo;
}

// 獲取特徵範圍（用於標準化）
function getFeatureRanges() {
    const ranges = {};
    const features = ["勞動年齡比例", "商業集中度", "家庭收入中位數", "第三產業比例", "醫療指數"];
    
    features.forEach(feature => {
        const values = Object.values(districtData).map(d => d[feature]);
        ranges[feature] = {
            min: Math.min(...values),
            max: Math.max(...values)
        };
    });
    
    return ranges;
}

// 標準化特徵值（0-1範圍）
function normalizeFeature(value, feature) {
    const ranges = getFeatureRanges();
    const range = ranges[feature];
    return (value - range.min) / (range.max - range.min);
} 